<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notepad Modernizer - Build Your Website (90 Levels)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #444; }
        .bg-checkered {
            background-color: #ffffff;
            background-image: linear-gradient(45deg, #eee 25%, transparent 25%), linear-gradient(-45deg, #eee 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #eee 75%), linear-gradient(-45deg, transparent 75%, #eee 75%);
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="bg-neutral-900 text-white h-screen overflow-hidden selection:bg-green-500 selection:text-black">
    <div id="root" class="h-full flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- AI DEVELOPER ROADMAP (UPDATED) ---
        const __AI_DEVELOPER_ROADMAP__ = {
            current_progress: "All 6 Chapters Complete (Levels 1-90)",
            completed_chapters: [
                { chapter: 1, levels: "1-12", topic: "Basic Structure", status: "âœ“ Complete", coverage: "Container, Header, Navigation, Hero, Grid, Footer" },
                { chapter: 2, levels: "13-25", topic: "Forms & Input", status: "âœ“ Complete", coverage: "Form structure, Input types, Labels, Buttons, Validation styling" },
                { chapter: 3, levels: "26-40", topic: "CSS Variables & Themes", status: "âœ“ Complete", coverage: "CSS custom properties, Color schemes, Dark mode toggle, Theme systems" },
                { chapter: 4, levels: "41-60", topic: "Advanced Grid Layouts", status: "âœ“ Complete", coverage: "Grid areas, Named lines, Asymmetric layouts, Bento grids, Magazine layouts" },
                { chapter: 5, levels: "61-80", topic: "Responsive Design", status: "âœ“ Complete", coverage: "Media queries, Mobile-first, Breakpoints, Responsive typography, Flexible images" },
                { chapter: 6, levels: "81-90", topic: "Animations & Polish", status: "âœ“ Complete", coverage: "Transitions, Keyframes, Hover effects, Loading states, Micro-interactions" }
            ],
            architecture_notes: {
                pattern: "Alternating 'choice' (inject) and 'essay' (edit) levels",
                markers: "Uses <!-- STEP_X --> markers for code injection points",
                progression: "Each chapter builds on previous concepts",
                validation: "Essay levels include regex validation for specific CSS properties",
                export: "Final code can be exported as standalone HTML file"
            },
            future_enhancements: [
                "Chapter 7: JavaScript basics (event listeners, DOM manipulation)",
                "Chapter 8: Accessibility (ARIA, semantic HTML, keyboard navigation)",
                "Chapter 9: Performance optimization (lazy loading, minification)",
                "Chapter 10: Advanced CSS (custom properties, container queries, has() selector)"
            ]
        };

        // --- ICONS ---
        const Icon = ({ path, className = "" }) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{path}</svg>;
        const TerminalIcon = () => <Icon path={<><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></>} />;
        const SaveIcon = () => <Icon path={<><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></>} />;
        const CheckCircleIcon = () => <Icon path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></>} />;
        const PlayIcon = () => <Icon path={<polygon points="5 3 19 12 5 21 5 3"></polygon>} />;
        const GlobeIcon = () => <Icon path={<><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></>} />;
        const BookIcon = () => <Icon path={<><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></>} />;

        // --- ALL 90 LEVELS ---
        const LEVELS = [
            // ========================================
            // CHAPTER 1: BASIC STRUCTURE (1-12)
            // ========================================
            {
                id: 1,
                chapter: 1,
                type: 'choice',
                title: { en: '1. The Container', id: '1. Memilih Wadah (Container)' },
                desc: { en: 'Start modern. Choose the Div structure.', id: 'Mulai dengan modern. Pilih struktur Div.' },
                targetMarker: '<!-- STEP_1_CONTAINER -->',
                options: [
                    { label: { en: 'A. Legacy Table', id: 'A. Table (Jadul)' }, previewCode: '<table width="100%">', code: '<table>...</table>', correct: false, msg: { en: 'Tables are for data!', id: 'Table hanya untuk data!' } },
                    { 
                        label: { en: 'B. Modern Div', id: 'B. Div Container' }, 
                        previewCode: '<div class="main">...</div>', 
                        code: '<div class="main-container">\n    <h1>Halo Dunia</h1>\n    <p>Selamat datang di web saya.</p>\n    \n    <!-- STEP_2_NAV -->\n  </div>', 
                        cssToAdd: '\n    h1 { color: #333; text-align: left; /* <--- EDIT */ }\n    .main-container { max-width: 800px; margin: 0 auto; padding: 20px; }',
                        correct: true, 
                        msg: { en: 'Div injected.', id: 'Div berhasil ditambahkan.' } 
                    }
                ]
            },
            {
                id: 2,
                chapter: 1,
                type: 'essay',
                title: { en: '2. Custom Header', id: '2. Kustomisasi Header' },
                desc: { en: 'Edit the H1 color and text.', id: 'Ubah warna dan teks H1.' },
                guidance: { en: ['Change <h1> text.', 'Change color to "blue" or "crimson".', 'Change text-align to "center".'], id: ['Ubah teks <h1>.', 'Ganti color jadi "blue" atau "crimson".', 'Ganti text-align jadi "center".'] },
                validation: (code) => /text-align:\s*center/i.test(code),
                successMsg: { en: 'Header styled!', id: 'Header sudah cantik!' }
            },
            {
                id: 3,
                chapter: 1,
                type: 'choice',
                title: { en: '3. Navigation Bar', id: '3. Navigasi' },
                desc: { en: 'Add a menu using Flexbox.', id: 'Tambah menu menggunakan Flexbox.' },
                targetMarker: '<!-- STEP_2_NAV -->',
                options: [
                    { label: { en: 'A. Vertical Block', id: 'A. Block (Vertikal)' }, previewCode: 'display: block;', code: '...', correct: false, msg: { en: 'Not for a top menu.', id: 'Kurang cocok untuk menu atas.' } },
                    { 
                        label: { en: 'B. Flex Row', id: 'B. Flexbox (Horizontal)' }, 
                        previewCode: 'display: flex; gap: 20px;', 
                        code: '<nav class="menu-box">\n      <a href="#">Beranda</a>\n      <a href="#">Produk</a>\n      <a href="#">Kontak</a>\n    </nav>\n    <!-- STEP_3_HERO -->', 
                        cssToAdd: '\n    .menu-box { display: flex; gap: 20px; padding: 10px 0; border-bottom: 1px solid #ccc; /* <--- EDIT */ }\n    .menu-box a { text-decoration: none; color: #555; font-weight: bold; }',
                        correct: true, 
                        msg: { en: 'Nav injected.', id: 'Navigasi ditambahkan.' } 
                    }
                ]
            },
            {
                id: 4,
                chapter: 1,
                type: 'essay',
                title: { en: '4. Style Links', id: '4. Edit Menu' },
                desc: { en: 'Space them out and change links.', id: 'Beri jarak dan ubah nama link.' },
                guidance: { en: ['Change link text (Beranda â†’ Home).', 'Increase gap to 40px.', 'Change border color.'], id: ['Ubah teks link (Beranda â†’ Home).', 'Perbesar gap jadi 40px.', 'Ubah warna border.'] },
                validation: (code) => /gap:\s*(?!20px)/i.test(code),
                successMsg: { en: 'Links updated!', id: 'Link diperbarui!' }
            },
            {
                id: 5,
                chapter: 1,
                type: 'choice',
                title: { en: '5. Hero Section', id: '5. Hero Section (Banner)' },
                desc: { en: 'Add a big banner area.', id: 'Tambahkan area banner besar.' },
                targetMarker: '<!-- STEP_3_HERO -->',
                options: [
                    { label: { en: 'A. Image Tag', id: 'A. Tag Gambar Biasa' }, previewCode: '<img src="...">', code: '...', correct: false, msg: { en: 'Too simple for a hero.', id: 'Terlalu sederhana untuk Hero.' } },
                    { 
                        label: { en: 'B. Hero Banner', id: 'B. Hero Banner (Background)' }, 
                        previewCode: 'background-color: #eee; padding: 50px;', 
                        code: '<div class="hero">\n      <h2>Welcome to Future</h2>\n      <p>Building the web, one div at a time.</p>\n    </div>\n    <!-- STEP_4_GRID -->', 
                        cssToAdd: '\n    .hero { \n      background-color: #f3f4f6; /* <--- GANTI BG */\n      padding: 60px 20px; \n      text-align: center; \n      border-radius: 10px; \n      margin-top: 20px; \n    }\n    .hero h2 { font-size: 2em; margin-bottom: 10px; }',
                        correct: true, 
                        msg: { en: 'Hero injected.', id: 'Banner Hero ditambahkan.' } 
                    }
                ]
            },
            {
                id: 6,
                chapter: 1,
                type: 'essay',
                title: { en: '6. Customize Hero', id: '6. Kustomisasi Banner' },
                desc: { en: 'Make the banner pop! Change background.', id: 'Buat banner menonjol! Ganti background.' },
                guidance: { en: ['Change background-color to #e0e7ff (light blue).', 'Change padding to 100px.', 'Edit the H2 text.'], id: ['Ganti background-color jadi #e0e7ff (biru muda).', 'Ubah padding jadi 100px agar besar.', 'Ubah teks H2.'] },
                validation: (code) => /padding:\s*(?!60px)/i.test(code),
                successMsg: { en: 'Hero looks big!', id: 'Banner terlihat megah!' }
            },
            {
                id: 7,
                chapter: 1,
                type: 'choice',
                title: { en: '7. Content Layout', id: '7. Layout Konten' },
                desc: { en: 'Choose how to display your articles.', id: 'Pilih cara menampilkan artikelmu.' },
                targetMarker: '<!-- STEP_4_GRID -->',
                options: [
                    { 
                        label: { en: 'A. Float (Legacy)', id: 'A. Float (Jadul)' }, 
                        previewCode: 'float: left; width: 33%;', 
                        code: '...', 
                        correct: false, 
                        msg: { en: 'Floats are brittle.', id: 'Float mudah berantakan.' } 
                    },
                    { 
                        label: { en: 'B. Grid 3 Columns', id: 'B. Grid 3 Kolom' }, 
                        previewCode: 'grid-template-columns: 1fr 1fr 1fr;', 
                        code: '<div class="grid-box">\n      <div class="card">Fitur A</div>\n      <div class="card">Fitur B</div>\n      <div class="card">Fitur C</div>\n    </div>\n    <!-- STEP_5_FOOTER -->', 
                        cssToAdd: '\n    .grid-box { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 30px; /* <--- EDIT KOLOM */ }\n    .card { background: white; border: 1px solid #ddd; padding: 20px; border-radius: 8px; color: #333; }',
                        correct: true, 
                        msg: { en: '3 Col Grid added.', id: 'Grid 3 Kolom ditambahkan.' } 
                    }
                ]
            },
            {
                id: 8,
                chapter: 1,
                type: 'essay',
                title: { en: '8. Card Styling', id: '8. Kustomisasi Kartu' },
                desc: { en: 'Style the cards. Add shadows or borders.', id: 'Hias kartu konten. Tambahkan shadow atau border.' },
                guidance: { en: ['Add "box-shadow: 0 4px 8px rgba(0,0,0,0.1)" to .card.', 'Change card background.', 'Try changing border-radius.'], id: ['Tambahkan "box-shadow: 0 4px 8px rgba(0,0,0,0.1)" ke .card.', 'Ganti warna background kartu.', 'Coba ubah border-radius.'] },
                validation: (code) => /box-shadow:/i.test(code) || /background:/i.test(code),
                successMsg: { en: 'Cards look modern!', id: 'Kartu terlihat modern!' }
            },
            {
                id: 9,
                chapter: 1,
                type: 'choice',
                title: { en: '9. Footer', id: '9. Footer (Kaki Website)' },
                desc: { en: 'Close the page with a footer.', id: 'Tutup halaman dengan footer.' },
                targetMarker: '<!-- STEP_5_FOOTER -->',
                options: [
                    { label: { en: 'A. Empty Div', id: 'A. Div Kosong' }, previewCode: '<div></div>', code: '...', correct: false, msg: { en: 'Too empty.', id: 'Terlalu kosong.' } },
                    { 
                        label: { en: 'B. Semantic Footer', id: 'B. Footer Semantik' }, 
                        previewCode: '<footer>&copy; 2024</footer>', 
                        code: '<footer class="site-footer">\n      &copy; 2024 Website Buatanku. All rights reserved.\n    </footer>', 
                        cssToAdd: '\n    .site-footer { margin-top: 50px; padding: 20px; text-align: center; color: #888; border-top: 1px solid #eee; font-size: 0.9em; /* <--- EDIT */ }',
                        correct: true, 
                        msg: { en: 'Footer added.', id: 'Footer ditambahkan.' } 
                    }
                ]
            },
            {
                id: 10,
                chapter: 1,
                type: 'essay',
                title: { en: '10. Footer Polish', id: '10. Sentuhan Akhir Footer' },
                desc: { en: 'Personalize the footer.', id: 'Personalisasi footer.' },
                guidance: { en: ['Change the copyright year/name.', 'Make footer background dark (bg: #333, color: white).', 'Add padding.'], id: ['Ganti tahun/nama copyright.', 'Buat background footer gelap (bg: #333, color: white).', 'Tambah padding.'] },
                validation: (code) => /color:/i.test(code),
                successMsg: { en: 'Footer complete!', id: 'Footer selesai!' }
            },
            {
                id: 11,
                chapter: 1,
                type: 'essay',
                title: { en: '11. Body Styling', id: '11. Gaya Body' },
                desc: { en: 'Style the entire page body.', id: 'Atur gaya untuk seluruh halaman.' },
                guidance: { en: ['Change body background-color to #fafafa.', 'Add font-family: "Arial", sans-serif;', 'Try line-height: 1.6;'], id: ['Ubah background-color body jadi #fafafa.', 'Tambah font-family: "Arial", sans-serif;', 'Coba line-height: 1.6;'] },
                validation: (code) => /line-height:/i.test(code),
                successMsg: { en: 'Page styled!', id: 'Halaman sudah rapi!' }
            },
            {
                id: 12,
                chapter: 1,
                type: 'essay',
                title: { en: '12. Chapter 1 Complete!', id: '12. Bab 1 Selesai!' },
                desc: { en: 'Review and finalize your basic structure.', id: 'Tinjau dan finalisasi struktur dasar.' },
                guidance: { en: ['Review all sections (header, nav, hero, grid, footer).', 'Make any final adjustments.', 'Ready for Chapter 2: Forms!'], id: ['Tinjau semua bagian (header, nav, hero, grid, footer).', 'Buat penyesuaian akhir.', 'Siap untuk Bab 2: Forms!'] },
                validation: (code) => true,
                successMsg: { en: 'Chapter 1 Complete! ðŸŽ‰', id: 'Bab 1 Selesai! ðŸŽ‰' }
            },

            // ========================================
            // CHAPTER 2: FORMS & INPUT (13-25)
            // ========================================
            {
                id: 13,
                chapter: 2,
                type: 'choice',
                title: { en: '13. Contact Form', id: '13. Form Kontak' },
                desc: { en: 'Add a contact form section.', id: 'Tambahkan bagian form kontak.' },
                targetMarker: '<!-- STEP_5_FOOTER -->',
                options: [
                    { label: { en: 'A. Table Form', id: 'A. Form dengan Table' }, previewCode: '<table><tr><td>Name</td></tr></table>', code: '...', correct: false, msg: { en: 'No tables for forms!', id: 'Jangan pakai table untuk form!' } },
                    { 
                        label: { en: 'B. Div Form', id: 'B. Form dengan Div' }, 
                        previewCode: '<form><div class="field">...', 
                        code: '<section class="contact-section">\n      <h2>Hubungi Kami</h2>\n      <form class="contact-form">\n        <!-- STEP_14_INPUTS -->\n      </form>\n    </section>\n    <!-- STEP_5_FOOTER -->', 
                        cssToAdd: '\n    .contact-section { margin-top: 40px; }\n    .contact-section h2 { color: #333; margin-bottom: 20px; /* <--- EDIT */ }\n    .contact-form { max-width: 500px; margin: 0 auto; }',
                        correct: true, 
                        msg: { en: 'Form section added.', id: 'Bagian form ditambahkan.' } 
                    }
                ]
            },
            {
                id: 14,
                chapter: 2,
                type: 'choice',
                title: { en: '14. Text Input', id: '14. Input Teks' },
                desc: { en: 'Add name and email inputs.', id: 'Tambahkan input nama dan email.' },
                targetMarker: '<!-- STEP_14_INPUTS -->',
                options: [
                    { label: { en: 'A. No Labels', id: 'A. Tanpa Label' }, previewCode: '<input type="text">', code: '...', correct: false, msg: { en: 'Always use labels!', id: 'Selalu pakai label!' } },
                    { 
                        label: { en: 'B. With Labels', id: 'B. Dengan Label' }, 
                        previewCode: '<label>Name:</label><input>', 
                        code: '<div class="form-field">\n          <label for="name">Nama:</label>\n          <input type="text" id="name" placeholder="Nama Anda">\n        </div>\n        <div class="form-field">\n          <label for="email">Email:</label>\n          <input type="email" id="email" placeholder="email@contoh.com">\n        </div>\n        <!-- STEP_15_TEXTAREA -->', 
                        cssToAdd: '\n    .form-field { margin-bottom: 15px; /* <--- EDIT */ }\n    .form-field label { display: block; margin-bottom: 5px; color: #555; font-weight: bold; }\n    .form-field input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }',
                        correct: true, 
                        msg: { en: 'Inputs added.', id: 'Input ditambahkan.' } 
                    }
                ]
            },
            {
                id: 15,
                chapter: 2,
                type: 'choice',
                title: { en: '15. Textarea', id: '15. Area Pesan' },
                desc: { en: 'Add a message textarea.', id: 'Tambahkan area untuk pesan.' },
                targetMarker: '<!-- STEP_15_TEXTAREA -->',
                options: [
                    { label: { en: 'A. Single Line', id: 'A. Satu Baris' }, previewCode: '<input type="text">', code: '...', correct: false, msg: { en: 'Use textarea for long text!', id: 'Pakai textarea untuk teks panjang!' } },
                    { 
                        label: { en: 'B. Multi-line', id: 'B. Multi-baris' }, 
                        previewCode: '<textarea rows="4">', 
                        code: '<div class="form-field">\n          <label for="message">Pesan:</label>\n          <textarea id="message" rows="5" placeholder="Tulis pesan Anda..."></textarea>\n        </div>\n        <!-- STEP_16_BUTTON -->', 
                        cssToAdd: '\n    .form-field textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; box-sizing: border-box; resize: vertical; /* <--- EDIT */ }',
                        correct: true, 
                        msg: { en: 'Textarea added.', id: 'Textarea ditambahkan.' } 
                    }
                ]
            },
            {
                id: 16,
                chapter: 2,
                type: 'choice',
                title: { en: '16. Submit Button', id: '16. Tombol Kirim' },
                desc: { en: 'Add a submit button.', id: 'Tambahkan tombol kirim.' },
                targetMarker: '<!-- STEP_16_BUTTON -->',
                options: [
                    { label: { en: 'A. Link', id: 'A. Link Biasa' }, previewCode: '<a href="#">Submit</a>', code: '...', correct: false, msg: { en: 'Use button element!', id: 'Pakai elemen button!' } },
                    { 
                        label: { en: 'B. Button', id: 'B. Button Element' }, 
                        previewCode: '<button type="submit">', 
                        code: '<button type="submit" class="submit-btn">Kirim Pesan</button>', 
                        cssToAdd: '\n    .submit-btn { \n      background-color: #3b82f6; /* <--- EDIT */\n      color: white; \n      padding: 12px 30px; \n      border: none; \n      border-radius: 6px; \n      font-size: 1em; \n      font-weight: bold; \n      cursor: pointer; \n    }\n    .submit-btn:hover { background-color: #2563eb; }',
                        correct: true, 
                        msg: { en: 'Button added.', id: 'Tombol ditambahkan.' } 
                    }
                ]
            },
            {
                id: 17,
                chapter: 2,
                type: 'essay',
                title: { en: '17. Style Inputs', id: '17. Gaya Input' },
                desc: { en: 'Improve input styling.', id: 'Tingkatkan gaya input.' },
                guidance: { en: ['Change input border to 2px solid #ddd.', 'Add focus state: input:focus { border-color: #3b82f6; }', 'Increase padding to 12px.'], id: ['Ubah border input jadi 2px solid #ddd.', 'Tambah focus state: input:focus { border-color: #3b82f6; }', 'Perbesar padding jadi 12px.'] },
                validation: (code) => /input:focus/i.test(code),
                successMsg: { en: 'Inputs styled!', id: 'Input sudah cantik!' }
            },
            {
                id: 18,
                chapter: 2,
                type: 'essay',
                title: { en: '18. Button Effects', id: '18. Efek Tombol' },
                desc: { en: 'Add hover and active effects to button.', id: 'Tambahkan efek hover dan active ke tombol.' },
                guidance: { en: ['Already has :hover. Add :active { transform: scale(0.98); }', 'Try adding transition: all 0.2s;', 'Change hover background color.'], id: ['Sudah ada :hover. Tambah :active { transform: scale(0.98); }', 'Coba tambah transition: all 0.2s;', 'Ubah warna background hover.'] },
                validation: (code) => /transform:\s*scale/i.test(code) || /transition:/i.test(code),
                successMsg: { en: 'Button interactive!', id: 'Tombol interaktif!' }
            },
            {
                id: 19,
                chapter: 2,
                type: 'essay',
                title: { en: '19. Form Spacing', id: '19. Jarak Form' },
                desc: { en: 'Adjust spacing in form.', id: 'Atur jarak dalam form.' },
                guidance: { en: ['Change .form-field margin-bottom to 20px.', 'Add margin-top to submit button.', 'Try padding adjustments.'], id: ['Ubah .form-field margin-bottom jadi 20px.', 'Tambah margin-top ke tombol submit.', 'Coba sesuaikan padding.'] },
                validation: (code) => /margin-bottom:\s*(?!15px)/i.test(code),
                successMsg: { en: 'Form spacing improved!', id: 'Jarak form diperbaiki!' }
            },
            {
                id: 20,
                chapter: 2,
                type: 'essay',
                title: { en: '20. Label Styling', id: '20. Gaya Label' },
                desc: { en: 'Style form labels.', id: 'Atur gaya label form.' },
                guidance: { en: ['Change label color.', 'Try font-size: 0.9em;', 'Add text-transform: uppercase;'], id: ['Ubah warna label.', 'Coba font-size: 0.9em;', 'Tambah text-transform: uppercase;'] },
                validation: (code) => /text-transform:/i.test(code) || /font-size.*0\.9/i.test(code),
                successMsg: { en: 'Labels styled!', id: 'Label sudah rapi!' }
            },
            {
                id: 21,
                chapter: 2,
                type: 'essay',
                title: { en: '21. Input Border Radius', id: '21. Sudut Input' },
                desc: { en: 'Round the corners more.', id: 'Bulatkan sudut lebih banyak.' },
                guidance: { en: ['Change input border-radius to 8px.', 'Try 12px for more rounded.', 'Update textarea too.'], id: ['Ubah border-radius input jadi 8px.', 'Coba 12px untuk lebih bulat.', 'Update textarea juga.'] },
                validation: (code) => /border-radius:\s*(?!4px)/i.test(code),
                successMsg: { en: 'Corners rounded!', id: 'Sudut dibulatkan!' }
            },
            {
                id: 22,
                chapter: 2,
                type: 'essay',
                title: { en: '22. Placeholder Styling', id: '22. Gaya Placeholder' },
                desc: { en: 'Style placeholder text.', id: 'Atur gaya teks placeholder.' },
                guidance: { en: ['Add: input::placeholder { color: #999; }', 'Try opacity: 0.7;', 'Add font-style: italic;'], id: ['Tambah: input::placeholder { color: #999; }', 'Coba opacity: 0.7;', 'Tambah font-style: italic;'] },
                validation: (code) => /::placeholder/i.test(code),
                successMsg: { en: 'Placeholder styled!', id: 'Placeholder sudah cantik!' }
            },
            {
                id: 23,
                chapter: 2,
                type: 'essay',
                title: { en: '23. Form Shadow', id: '23. Shadow Form' },
                desc: { en: 'Add shadow to form container.', id: 'Tambahkan shadow ke container form.' },
                guidance: { en: ['Add to .contact-form: box-shadow: 0 2px 10px rgba(0,0,0,0.1);', 'Try adding background: white;', 'Add padding: 30px;'], id: ['Tambah ke .contact-form: box-shadow: 0 2px 10px rgba(0,0,0,0.1);', 'Coba tambah background: white;', 'Tambah padding: 30px;'] },
                validation: (code) => /box-shadow.*contact-form/is.test(code) || /\.contact-form[\s\S]*box-shadow/i.test(code),
                successMsg: { en: 'Form has depth!', id: 'Form punya kedalaman!' }
            },
            {
                id: 24,
                chapter: 2,
                type: 'essay',
                title: { en: '24. Button Width', id: '24. Lebar Tombol' },
                desc: { en: 'Make button full width.', id: 'Buat tombol selebar penuh.' },
                guidance: { en: ['Add width: 100%; to .submit-btn.', 'Try margin-top: 10px;', 'Adjust padding if needed.'], id: ['Tambah width: 100%; ke .submit-btn.', 'Coba margin-top: 10px;', 'Sesuaikan padding jika perlu.'] },
                validation: (code) => /width:\s*100%/i.test(code),
                successMsg: { en: 'Button full width!', id: 'Tombol penuh!' }
            },
            {
                id: 25,
                chapter: 2,
                type: 'essay',
                title: { en: '25. Chapter 2 Complete!', id: '25. Bab 2 Selesai!' },
                desc: { en: 'Review your form. Ready for CSS variables!', id: 'Tinjau form Anda. Siap untuk CSS variables!' },
                guidance: { en: ['Check all form elements.', 'Test visual hierarchy.', 'Ready for theming!'], id: ['Cek semua elemen form.', 'Test hierarki visual.', 'Siap untuk theming!'] },
                validation: (code) => true,
                successMsg: { en: 'Chapter 2 Complete! ðŸŽ¨', id: 'Bab 2 Selesai! ðŸŽ¨' }
            },

            // ========================================
            // CHAPTER 3: CSS VARIABLES & THEMES (26-40)
            // ========================================
            {
                id: 26,
                chapter: 3,
                type: 'choice',
                title: { en: '26. CSS Variables Intro', id: '26. Pengenalan CSS Variables' },
                desc: { en: 'Start using CSS custom properties.', id: 'Mulai pakai CSS custom properties.' },
                targetMarker: '/* === AREA CSS KAMU ADA DI BAWAH === */',
                options: [
                    { label: { en: 'A. Inline Values', id: 'A. Nilai Inline' }, previewCode: 'color: #3b82f6;', code: '...', correct: false, msg: { en: 'Hard to maintain!', id: 'Susah di-maintain!' } },
                    { 
                        label: { en: 'B. CSS Variables', id: 'B. CSS Variables' }, 
                        previewCode: ':root { --primary: #3b82f6; }', 
                        code: '\n    :root {\n      --primary-color: #3b82f6; /* <--- EDIT */\n      --text-color: #333;\n      --bg-color: #ffffff;\n      --border-color: #ccc;\n    }', 
                        cssToAdd: '',
                        correct: true, 
                        msg: { en: 'Variables declared!', id: 'Variables dideklarasi!' } 
                    }
                ]
            },
            {
                id: 27,
                chapter: 3,
                type: 'essay',
                title: { en: '27. Use Variables', id: '27. Pakai Variables' },
                desc: { en: 'Replace colors with var().', id: 'Ganti warna dengan var().' },
                guidance: { en: ['Change .submit-btn background to: var(--primary-color)', 'Try: border: 1px solid var(--border-color);', 'Use var(--text-color) for text.'], id: ['Ubah background .submit-btn jadi: var(--primary-color)', 'Coba: border: 1px solid var(--border-color);', 'Pakai var(--text-color) untuk teks.'] },
                validation: (code) => /var\(--/i.test(code),
                successMsg: { en: 'Variables in use!', id: 'Variables dipakai!' }
            },
            {
                id: 28,
                chapter: 3,
                type: 'essay',
                title: { en: '28. More Variables', id: '28. Lebih Banyak Variables' },
                desc: { en: 'Add spacing and size variables.', id: 'Tambah variables untuk jarak dan ukuran.' },
                guidance: { en: ['Add to :root: --spacing-lg: 40px;', 'Add --radius: 8px;', 'Add --font-size-base: 16px;'], id: ['Tambah ke :root: --spacing-lg: 40px;', 'Tambah --radius: 8px;', 'Tambah --font-size-base: 16px;'] },
                validation: (code) => /--spacing|--radius|--font-size/i.test(code),
                successMsg: { en: 'System variables added!', id: 'System variables ditambah!' }
            },
            {
                id: 29,
                chapter: 3,
                type: 'essay',
                title: { en: '29. Apply Spacing', id: '29. Terapkan Jarak' },
                desc: { en: 'Use spacing variables.', id: 'Pakai spacing variables.' },
                guidance: { en: ['Change margin-top: var(--spacing-lg);', 'Use in padding too.', 'Create --spacing-sm: 10px;'], id: ['Ubah margin-top: var(--spacing-lg);', 'Pakai di padding juga.', 'Buat --spacing-sm: 10px;'] },
                validation: (code) => /var\(--spacing/i.test(code),
                successMsg: { en: 'Spacing standardized!', id: 'Jarak terstandar!' }
            },
            {
                id: 30,
                chapter: 3,
                type: 'essay',
                title: { en: '30. Border Radius System', id: '30. Sistem Border Radius' },
                desc: { en: 'Use radius variable everywhere.', id: 'Pakai variable radius di mana-mana.' },
                guidance: { en: ['Replace border-radius values with var(--radius).', 'Try creating --radius-lg: 12px;', 'Use in cards, inputs, buttons.'], id: ['Ganti nilai border-radius dengan var(--radius).', 'Coba buat --radius-lg: 12px;', 'Pakai di cards, inputs, buttons.'] },
                validation: (code) => /var\(--radius/i.test(code),
                successMsg: { en: 'Radius system active!', id: 'Sistem radius aktif!' }
            },
            {
                id: 31,
                chapter: 3,
                type: 'choice',
                title: { en: '31. Dark Mode Prep', id: '31. Persiapan Dark Mode' },
                desc: { en: 'Prepare for dark mode toggle.', id: 'Persiapkan untuk dark mode toggle.' },
                targetMarker: ':root {',
                options: [
                    { label: { en: 'A. Separate Files', id: 'A. File Terpisah' }, previewCode: 'dark.css', code: '...', correct: false, msg: { en: 'Keep it in one file!', id: 'Simpan di satu file!' } },
                    { 
                        label: { en: 'B. Data Attribute', id: 'B. Data Attribute' }, 
                        previewCode: '[data-theme="dark"]', 
                        code: ':root {\n      --primary-color: #3b82f6; /* <--- EDIT */\n      --text-color: #333;\n      --bg-color: #ffffff;\n      --border-color: #ccc;\n      --card-bg: #ffffff;\n    }\n    \n    /* DARK MODE */\n    [data-theme="dark"] {', 
                        cssToAdd: '\n      --primary-color: #60a5fa;\n      --text-color: #e5e5e5;\n      --bg-color: #1a1a1a;\n      --border-color: #444;\n      --card-bg: #2a2a2a;\n    }',
                        correct: true, 
                        msg: { en: 'Dark mode ready!', id: 'Dark mode siap!' } 
                    }
                ]
            },
            {
                id: 32,
                chapter: 3,
                type: 'essay',
                title: { en: '32. Apply Theme Colors', id: '32. Terapkan Warna Tema' },
                desc: { en: 'Use theme variables in body and cards.', id: 'Pakai theme variables di body dan cards.' },
                guidance: { en: ['body { background-color: var(--bg-color); color: var(--text-color); }', 'Update .card background to var(--card-bg).', 'Check all elements use variables.'], id: ['body { background-color: var(--bg-color); color: var(--text-color); }', 'Update background .card jadi var(--card-bg).', 'Cek semua elemen pakai variables.'] },
                validation: (code) => /var\(--bg-color\)|var\(--text-color\)/i.test(code),
                successMsg: { en: 'Theme colors applied!', id: 'Warna tema diterapkan!' }
            },
            {
                id: 33,
                chapter: 3,
                type: 'essay',
                title: { en: '33. Dark Borders', id: '33. Border Gelap' },
                desc: { en: 'Update borders with theme variable.', id: 'Update border dengan theme variable.' },
                guidance: { en: ['Find all "border: 1px solid #ccc".', 'Replace with var(--border-color).', 'Check menu-box, inputs, cards.'], id: ['Cari semua "border: 1px solid #ccc".', 'Ganti dengan var(--border-color).', 'Cek menu-box, inputs, cards.'] },
                validation: (code) => /var\(--border-color\)/i.test(code),
                successMsg: { en: 'Borders themed!', id: 'Border sudah tema!' }
            },
            {
                id: 34,
                chapter: 3,
                type: 'essay',
                title: { en: '34. Color Contrast', id: '34. Kontras Warna' },
                desc: { en: 'Improve dark mode contrast.', id: 'Tingkatkan kontras dark mode.' },
                guidance: { en: ['In [data-theme="dark"], make --text-color lighter (#f5f5f5).', 'Adjust --border-color to #555.', 'Test readability.'], id: ['Di [data-theme="dark"], buat --text-color lebih terang (#f5f5f5).', 'Sesuaikan --border-color jadi #555.', 'Test keterbacaan.'] },
                validation: (code) => /data-theme.*dark/is.test(code),
                successMsg: { en: 'Contrast improved!', id: 'Kontras ditingkatkan!' }
            },
            {
                id: 35,
                chapter: 3,
                type: 'essay',
                title: { en: '35. Secondary Color', id: '35. Warna Sekunder' },
                desc: { en: 'Add secondary color variable.', id: 'Tambah variable warna sekunder.' },
                guidance: { en: ['Add --secondary-color: #8b5cf6; to :root.', 'Add dark version: #a78bfa;', 'Use for accents.'], id: ['Tambah --secondary-color: #8b5cf6; ke :root.', 'Tambah versi dark: #a78bfa;', 'Pakai untuk aksen.'] },
                validation: (code) => /--secondary-color/i.test(code),
                successMsg: { en: 'Secondary color added!', id: 'Warna sekunder ditambah!' }
            },
            {
                id: 36,
                chapter: 3,
                type: 'essay',
                title: { en: '36. Shadow Variables', id: '36. Variable Shadow' },
                desc: { en: 'Create shadow system.', id: 'Buat sistem shadow.' },
                guidance: { en: ['Add --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);', 'Add --shadow-md: 0 4px 6px rgba(0,0,0,0.1);', 'Use in cards and buttons.'], id: ['Tambah --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);', 'Tambah --shadow-md: 0 4px 6px rgba(0,0,0,0.1);', 'Pakai di cards dan buttons.'] },
                validation: (code) => /--shadow/i.test(code),
                successMsg: { en: 'Shadow system ready!', id: 'Sistem shadow siap!' }
            },
            {
                id: 37,
                chapter: 3,
                type: 'essay',
                title: { en: '37. Apply Shadows', id: '37. Terapkan Shadow' },
                desc: { en: 'Use shadow variables.', id: 'Pakai shadow variables.' },
                guidance: { en: ['card { box-shadow: var(--shadow-md); }', 'Try on .contact-form too.', 'Dark mode: lighter shadows.'], id: ['card { box-shadow: var(--shadow-md); }', 'Coba di .contact-form juga.', 'Dark mode: shadow lebih terang.'] },
                validation: (code) => /var\(--shadow/i.test(code),
                successMsg: { en: 'Shadows applied!', id: 'Shadow diterapkan!' }
            },
            {
                id: 38,
                chapter: 3,
                type: 'essay',
                title: { en: '38. Typography Scale', id: '38. Skala Tipografi' },
                desc: { en: 'Create typography system.', id: 'Buat sistem tipografi.' },
                guidance: { en: ['Add --text-xs: 0.75rem;', '--text-sm: 0.875rem;', '--text-base: 1rem;', '--text-lg: 1.25rem;'], id: ['Tambah --text-xs: 0.75rem;', '--text-sm: 0.875rem;', '--text-base: 1rem;', '--text-lg: 1.25rem;'] },
                validation: (code) => /--text-(xs|sm|base|lg)/i.test(code),
                successMsg: { en: 'Typography scale added!', id: 'Skala tipografi ditambah!' }
            },
            {
                id: 39,
                chapter: 3,
                type: 'essay',
                title: { en: '39. Use Typography', id: '39. Pakai Tipografi' },
                desc: { en: 'Apply typography variables.', id: 'Terapkan typography variables.' },
                guidance: { en: ['body { font-size: var(--text-base); }', 'h2 { font-size: var(--text-lg); }', 'Small text: var(--text-sm);'], id: ['body { font-size: var(--text-base); }', 'h2 { font-size: var(--text-lg); }', 'Teks kecil: var(--text-sm);'] },
                validation: (code) => /var\(--text-(base|lg|sm)/i.test(code),
                successMsg: { en: 'Typography applied!', id: 'Tipografi diterapkan!' }
            },
            {
                id: 40,
                chapter: 3,
                type: 'essay',
                title: { en: '40. Chapter 3 Complete!', id: '40. Bab 3 Selesai!' },
                desc: { en: 'Theme system complete! Ready for advanced grids.', id: 'Sistem tema selesai! Siap untuk grid lanjutan.' },
                guidance: { en: ['Test switching data-theme in HTML.', 'All colors should adapt.', 'Ready for complex layouts!'], id: ['Test ganti data-theme di HTML.', 'Semua warna harus adaptif.', 'Siap untuk layout kompleks!'] },
                validation: (code) => true,
                successMsg: { en: 'Chapter 3 Complete! ðŸŒ“', id: 'Bab 3 Selesai! ðŸŒ“' }
            },

            // ========================================
            // CHAPTER 4: ADVANCED GRID (41-60)
            // ========================================
            {
                id: 41,
                chapter: 4,
                type: 'choice',
                title: { en: '41. Grid Areas Intro', id: '41. Pengenalan Grid Areas' },
                desc: { en: 'Learn named grid areas.', id: 'Pelajari named grid areas.' },
                targetMarker: '<!-- STEP_5_FOOTER -->',
                options: [
                    { label: { en: 'A. Simple Grid', id: 'A. Grid Sederhana' }, previewCode: 'grid-template-columns: 1fr 1fr;', code: '...', correct: false, msg: { en: 'We need areas!', id: 'Kita butuh areas!' } },
                    { 
                        label: { en: 'B. Named Areas', id: 'B. Named Areas' }, 
                        previewCode: 'grid-template-areas: "header header"', 
                        code: '<section class="bento-grid">\n      <div class="bento-item item-a">A</div>\n      <div class="bento-item item-b">B</div>\n      <div class="bento-item item-c">C</div>\n    </section>\n    <!-- STEP_5_FOOTER -->', 
                        cssToAdd: '\n    .bento-grid {\n      display: grid;\n      grid-template-columns: 1fr 1fr; /* <--- EDIT */\n      grid-template-areas:\n        "a a"\n        "b c";\n      gap: 15px;\n      margin-top: 30px;\n    }\n    .bento-item { background: var(--card-bg); padding: 30px; border-radius: var(--radius); border: 1px solid var(--border-color); }\n    .item-a { grid-area: a; }\n    .item-b { grid-area: b; }\n    .item-c { grid-area: c; }',
                        correct: true, 
                        msg: { en: 'Grid areas set!', id: 'Grid areas diatur!' } 
                    }
                ]
            },
            {
                id: 42,
                chapter: 4,
                type: 'essay',
                title: { en: '42. Modify Areas', id: '42. Ubah Area' },
                desc: { en: 'Change grid area layout.', id: 'Ubah layout grid area.' },
                guidance: { en: ['Try: "a b" / "a c" (A takes left column).', 'Try: "a a" / "b b" / "c c" (stack).', 'Experiment with layouts!'], id: ['Coba: "a b" / "a c" (A ambil kolom kiri).', 'Coba: "a a" / "b b" / "c c" (stack).', 'Eksperimen dengan layout!'] },
                validation: (code) => /grid-template-areas/i.test(code),
                successMsg: { en: 'Layout changed!', id: 'Layout diubah!' }
            },
            {
                id: 43,
                chapter: 4,
                type: 'essay',
                title: { en: '43. Add More Items', id: '43. Tambah Item' },
                desc: { en: 'Add item D to the grid.', id: 'Tambah item D ke grid.' },
                guidance: { en: ['Add <div class="bento-item item-d">D</div> in HTML.', 'Add .item-d { grid-area: d; }', 'Update grid-template-areas to include d.'], id: ['Tambah <div class="bento-item item-d">D</div> di HTML.', 'Tambah .item-d { grid-area: d; }', 'Update grid-template-areas sertakan d.'] },
                validation: (code) => /item-d|grid-area:\s*d/i.test(code),
                successMsg: { en: 'Item D added!', id: 'Item D ditambah!' }
            },
            {
                id: 44,
                chapter: 4,
                type: 'essay',
                title: { en: '44. Three Columns', id: '44. Tiga Kolom' },
                desc: { en: 'Make grid 3 columns.', id: 'Buat grid 3 kolom.' },
                guidance: { en: ['Change grid-template-columns: 1fr 1fr 1fr;', 'Adjust template-areas: "a a b" / "c c d";', 'Try different combinations.'], id: ['Ubah grid-template-columns: 1fr 1fr 1fr;', 'Sesuaikan template-areas: "a a b" / "c c d";', 'Coba kombinasi berbeda.'] },
                validation: (code) => /1fr\s+1fr\s+1fr/i.test(code),
                successMsg: { en: '3 columns set!', id: '3 kolom diatur!' }
            },
            {
                id: 45,
                chapter: 4,
                type: 'essay',
                title: { en: '45. Asymmetric Layout', id: '45. Layout Asimetris' },
                desc: { en: 'Create asymmetric column widths.', id: 'Buat lebar kolom asimetris.' },
                guidance: { en: ['Try: grid-template-columns: 2fr 1fr;', 'Or: 1fr 2fr 1fr;', 'Combine with different areas.'], id: ['Coba: grid-template-columns: 2fr 1fr;', 'Atau: 1fr 2fr 1fr;', 'Kombinasikan dengan area berbeda.'] },
                validation: (code) => /2fr|1fr\s+2fr|2fr\s+1fr/i.test(code),
                successMsg: { en: 'Asymmetric layout!', id: 'Layout asimetris!' }
            },
            {
                id: 46,
                chapter: 4,
                type: 'essay',
                title: { en: '46. Gap Adjustment', id: '46. Sesuaikan Gap' },
                desc: { en: 'Control grid gaps.', id: 'Kontrol jarak grid.' },
                guidance: { en: ['Change gap to 20px.', 'Try row-gap and column-gap separately.', 'Use variables: var(--spacing-sm).'], id: ['Ubah gap jadi 20px.', 'Coba row-gap dan column-gap terpisah.', 'Pakai variables: var(--spacing-sm).'] },
                validation: (code) => /gap:\s*(?!15px)|row-gap|column-gap/i.test(code),
                successMsg: { en: 'Gaps adjusted!', id: 'Gap disesuaikan!' }
            },
            {
                id: 47,
                chapter: 4,
                type: 'essay',
                title: { en: '47. Bento Styling', id: '47. Gaya Bento' },
                desc: { en: 'Style bento items uniquely.', id: 'Beri gaya unik pada item bento.' },
                guidance: { en: ['Add different backgrounds to items.', 'Try: .item-a { background: linear-gradient(...); }', 'Add min-height: 150px;'], id: ['Tambah background berbeda ke items.', 'Coba: .item-a { background: linear-gradient(...); }', 'Tambah min-height: 150px;'] },
                validation: (code) => /linear-gradient|min-height/i.test(code),
                successMsg: { en: 'Bento styled!', id: 'Bento diberi gaya!' }
            },
            {
                id: 48,
                chapter: 4,
                type: 'essay',
                title: { en: '48. Nested Grid', id: '48. Grid Bersarang' },
                desc: { en: 'Create grid inside an item.', id: 'Buat grid di dalam item.' },
                guidance: { en: ['Inside item-a, add: display: grid;', 'Add grid-template-columns: 1fr 1fr;', 'Put content in divs.'], id: ['Di dalam item-a, tambah: display: grid;', 'Tambah grid-template-columns: 1fr 1fr;', 'Taruh konten di divs.'] },
                validation: (code) => /item-a[\s\S]*display:\s*grid/i.test(code),
                successMsg: { en: 'Nested grid created!', id: 'Grid bersarang dibuat!' }
            },
            {
                id: 49,
                chapter: 4,
                type: 'essay',
                title: { en: '49. Auto-fit Magic', id: '49. Magic Auto-fit' },
                desc: { en: 'Use auto-fit for responsive grid.', id: 'Pakai auto-fit untuk grid responsif.' },
                guidance: { en: ['Try: grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));', 'Remove explicit areas for this test.', 'Watch it adapt!'], id: ['Coba: grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));', 'Hapus areas eksplisit untuk test.', 'Lihat adaptasinya!'] },
                validation: (code) => /auto-fit|repeat.*minmax/i.test(code),
                successMsg: { en: 'Auto-fit works!', id: 'Auto-fit jalan!' }
            },
            {
                id: 50,
                chapter: 4,
                type: 'essay',
                title: { en: '50. Grid Alignment', id: '50. Alignment Grid' },
                desc: { en: 'Align items in grid.', id: 'Sejajarkan item di grid.' },
                guidance: { en: ['Add align-items: center;', 'Try justify-items: center;', 'Or place-items: center;'], id: ['Tambah align-items: center;', 'Coba justify-items: center;', 'Atau place-items: center;'] },
                validation: (code) => /align-items|justify-items|place-items/i.test(code),
                successMsg: { en: 'Items aligned!', id: 'Item disejajarkan!' }
            },
            {
                id: 51,
                chapter: 4,
                type: 'essay',
                title: { en: '51. Dense Packing', id: '51. Packing Dense' },
                desc: { en: 'Use grid-auto-flow dense.', id: 'Pakai grid-auto-flow dense.' },
                guidance: { en: ['Add grid-auto-flow: dense;', 'Watch items fill gaps.', 'Useful for masonry-like layouts.'], id: ['Tambah grid-auto-flow: dense;', 'Lihat item mengisi celah.', 'Berguna untuk layout masonry.'] },
                validation: (code) => /grid-auto-flow:\s*dense/i.test(code),
                successMsg: { en: 'Dense packing enabled!', id: 'Dense packing aktif!' }
            },
            {
                id: 52,
                chapter: 4,
                type: 'essay',
                title: { en: '52. Span Control', id: '52. Kontrol Span' },
                desc: { en: 'Use grid-column and grid-row.', id: 'Pakai grid-column dan grid-row.' },
                guidance: { en: ['Try: .item-a { grid-column: span 2; }', 'Or: grid-row: span 2;', 'Control item size directly.'], id: ['Coba: .item-a { grid-column: span 2; }', 'Atau: grid-row: span 2;', 'Kontrol ukuran item langsung.'] },
                validation: (code) => /grid-(column|row):\s*span/i.test(code),
                successMsg: { en: 'Span controls added!', id: 'Kontrol span ditambah!' }
            },
            {
                id: 53,
                chapter: 4,
                type: 'essay',
                title: { en: '53. Named Lines', id: '53. Named Lines' },
                desc: { en: 'Create named grid lines.', id: 'Buat named grid lines.' },
                guidance: { en: ['Try: grid-template-columns: [start] 1fr [middle] 1fr [end];', 'Use in items: grid-column: start / middle;', 'Powerful for complex layouts.'], id: ['Coba: grid-template-columns: [start] 1fr [middle] 1fr [end];', 'Pakai di items: grid-column: start / middle;', 'Powerful untuk layout kompleks.'] },
                validation: (code) => /\[start\]|\[middle\]|\[end\]/i.test(code),
                successMsg: { en: 'Named lines created!', id: 'Named lines dibuat!' }
            },
            {
                id: 54,
                chapter: 4,
                type: 'essay',
                title: { en: '54. Magazine Layout', id: '54. Layout Majalah' },
                desc: { en: 'Create magazine-style grid.', id: 'Buat grid gaya majalah.' },
                guidance: { en: ['Use areas to make: header spans full, sidebar on right, main content left.', 'Try: "h h h" / "m m s" / "m m s"', 'Experiment!'], id: ['Pakai areas buat: header penuh, sidebar kanan, konten utama kiri.', 'Coba: "h h h" / "m m s" / "m m s"', 'Eksperimen!'] },
                validation: (code) => /grid-template-areas.*".*h.*h.*h"/is.test(code),
                successMsg: { en: 'Magazine layout!', id: 'Layout majalah!' }
            },
            {
                id: 55,
                chapter: 4,
                type: 'essay',
                title: { en: '55. Grid Item Order', id: '55. Urutan Item Grid' },
                desc: { en: 'Change visual order.', id: 'Ubah urutan visual.' },
                guidance: { en: ['Add order property: .item-c { order: -1; }', 'Changes visual position.', 'HTML order stays same.'], id: ['Tambah property order: .item-c { order: -1; }', 'Ubah posisi visual.', 'Urutan HTML tetap sama.'] },
                validation: (code) => /order:\s*-?\d/i.test(code),
                successMsg: { en: 'Order changed!', id: 'Urutan diubah!' }
            },
            {
                id: 56,
                chapter: 4,
                type: 'essay',
                title: { en: '56. Min-Max Columns', id: '56. Kolom Min-Max' },
                desc: { en: 'Use minmax() function.', id: 'Pakai fungsi minmax().' },
                guidance: { en: ['Try: grid-template-columns: minmax(200px, 1fr) 2fr;', 'First column: min 200px, max 1fr.', 'Flexible but controlled.'], id: ['Coba: grid-template-columns: minmax(200px, 1fr) 2fr;', 'Kolom pertama: min 200px, max 1fr.', 'Fleksibel tapi terkontrol.'] },
                validation: (code) => /minmax\(/i.test(code),
                successMsg: { en: 'Minmax applied!', id: 'Minmax diterapkan!' }
            },
            {
                id: 57,
                chapter: 4,
                type: 'essay',
                title: { en: '57. Grid Gap Colors', id: '57. Warna Gap Grid' },
                desc: { en: 'Fake colored gaps with background.', id: 'Buat gap berwarna dengan background.' },
                guidance: { en: ['Set grid background-color.', 'Make items have opaque backgrounds.', 'Gap shows grid background.'], id: ['Set background-color grid.', 'Buat items punya background opak.', 'Gap tunjukkan background grid.'] },
                validation: (code) => /bento-grid[\s\S]*background/i.test(code),
                successMsg: { en: 'Colored gaps!', id: 'Gap berwarna!' }
            },
            {
                id: 58,
                chapter: 4,
                type: 'essay',
                title: { en: '58. Holy Grail Layout', id: '58. Layout Holy Grail' },
                desc: { en: 'Classic layout with grid.', id: 'Layout klasik dengan grid.' },
                guidance: { en: ['Areas: header (full), nav (left), main (center), aside (right), footer (full).', '"h h h" / "n m a" / "f f f"', 'Classic 3-column.'], id: ['Areas: header (penuh), nav (kiri), main (tengah), aside (kanan), footer (penuh).', '"h h h" / "n m a" / "f f f"', 'Klasik 3-kolom.'] },
                validation: (code) => /grid-template-areas/i.test(code),
                successMsg: { en: 'Holy Grail achieved!', id: 'Holy Grail tercapai!' }
            },
            {
                id: 59,
                chapter: 4,
                type: 'essay',
                title: { en: '59. Grid Item Positioning', id: '59. Posisi Item Grid' },
                desc: { en: 'Place items with line numbers.', id: 'Tempatkan item dengan nomor baris.' },
                guidance: { en: ['Try: grid-column: 1 / 3; (span columns 1-3)', 'Try: grid-row: 2 / 4;', 'Precise control.'], id: ['Coba: grid-column: 1 / 3; (span kolom 1-3)', 'Coba: grid-row: 2 / 4;', 'Kontrol presisi.'] },
                validation: (code) => /grid-(column|row):\s*\d+\s*\/\s*\d+/i.test(code),
                successMsg: { en: 'Positioned precisely!', id: 'Diposisikan presisi!' }
            },
            {
                id: 60,
                chapter: 4,
                type: 'essay',
                title: { en: '60. Chapter 4 Complete!', id: '60. Bab 4 Selesai!' },
                desc: { en: 'Grid mastery! Ready for responsive design.', id: 'Grid dikuasai! Siap untuk desain responsif.' },
                guidance: { en: ['Create your favorite grid layout.', 'Test different area arrangements.', 'Ready for media queries!'], id: ['Buat layout grid favoritmu.', 'Test pengaturan area berbeda.', 'Siap untuk media queries!'] },
                validation: (code) => true,
                successMsg: { en: 'Chapter 4 Complete! ðŸ“', id: 'Bab 4 Selesai! ðŸ“' }
            },

            // ========================================
            // CHAPTER 5: RESPONSIVE DESIGN (61-80)
            // ========================================
            {
                id: 61,
                chapter: 5,
                type: 'choice',
                title: { en: '61. Media Queries Intro', id: '61. Pengenalan Media Queries' },
                desc: { en: 'Make design responsive.', id: 'Buat desain responsif.' },
                targetMarker: '/* === AREA CSS KAMU ADA DI BAWAH === */',
                options: [
                    { label: { en: 'A. Desktop Only', id: 'A. Desktop Saja' }, previewCode: 'width: 1200px;', code: '...', correct: false, msg: { en: 'Not mobile friendly!', id: 'Tidak mobile friendly!' } },
                    { 
                        label: { en: 'B. Media Query', id: 'B. Media Query' }, 
                        previewCode: '@media (max-width: 768px)', 
                        code: '\n    \n    /* RESPONSIVE BREAKPOINTS */\n    @media (max-width: 768px) {\n      /* <--- TABLET & MOBILE */\n    }', 
                        cssToAdd: '',
                        correct: true, 
                        msg: { en: 'Media query added!', id: 'Media query ditambah!' } 
                    }
                ]
            },
            {
                id: 62,
                chapter: 5,
                type: 'essay',
                title: { en: '62. Mobile Grid', id: '62. Grid Mobile' },
                desc: { en: 'Stack grid on mobile.', id: 'Stack grid di mobile.' },
                guidance: { en: ['Inside @media (max-width: 768px), add:', '.grid-box { grid-template-columns: 1fr; }', 'Single column on mobile.'], id: ['Di dalam @media (max-width: 768px), tambah:', '.grid-box { grid-template-columns: 1fr; }', 'Satu kolom di mobile.'] },
                validation: (code) => /@media.*grid-template-columns:\s*1fr/is.test(code),
                successMsg: { en: 'Mobile grid stacked!', id: 'Grid mobile di-stack!' }
            },
            {
                id: 63,
                chapter: 5,
                type: 'essay',
                title: { en: '63. Mobile Menu', id: '63. Menu Mobile' },
                desc: { en: 'Stack navigation on mobile.', id: 'Stack navigasi di mobile.' },
                guidance: { en: ['In media query: .menu-box { flex-direction: column; }', 'Stack links vertically.', 'Add gap adjustment.'], id: ['Di media query: .menu-box { flex-direction: column; }', 'Stack link vertikal.', 'Tambah penyesuaian gap.'] },
                validation: (code) => /flex-direction:\s*column/i.test(code),
                successMsg: { en: 'Mobile menu stacked!', id: 'Menu mobile di-stack!' }
            },
            {
                id: 64,
                chapter: 5,
                type: 'essay',
                title: { en: '64. Responsive Typography', id: '64. Tipografi Responsif' },
                desc: { en: 'Adjust text size on mobile.', id: 'Sesuaikan ukuran teks di mobile.' },
                guidance: { en: ['In media query: h1 { font-size: 1.5em; }', 'Reduce hero h2 size.', 'Make text readable on small screens.'], id: ['Di media query: h1 { font-size: 1.5em; }', 'Kurangi ukuran hero h2.', 'Buat teks terbaca di layar kecil.'] },
                validation: (code) => /@media.*font-size/is.test(code),
                successMsg: { en: 'Typography responsive!', id: 'Tipografi responsif!' }
            },
            {
                id: 65,
                chapter: 5,
                type: 'essay',
                title: { en: '65. Mobile Padding', id: '65. Padding Mobile' },
                desc: { en: 'Reduce padding on mobile.', id: 'Kurangi padding di mobile.' },
                guidance: { en: ['Reduce .main-container padding to 10px.', 'Reduce .hero padding.', 'More space for content.'], id: ['Kurangi padding .main-container jadi 10px.', 'Kurangi padding .hero.', 'Lebih banyak ruang untuk konten.'] },
                validation: (code) => /@media.*padding/is.test(code),
                successMsg: { en: 'Mobile padding adjusted!', id: 'Padding mobile disesuaikan!' }
            },
            {
                id: 66,
                chapter: 5,
                type: 'essay',
                title: { en: '66. Tablet Breakpoint', id: '66. Breakpoint Tablet' },
                desc: { en: 'Add tablet-specific styles.', id: 'Tambah style khusus tablet.' },
                guidance: { en: ['Add: @media (min-width: 768px) and (max-width: 1024px)', 'Set grid to 2 columns for tablet.', 'Medium-sized layouts.'], id: ['Tambah: @media (min-width: 768px) and (max-width: 1024px)', 'Set grid jadi 2 kolom untuk tablet.', 'Layout ukuran medium.'] },
                validation: (code) => /@media.*min-width.*max-width/is.test(code),
                successMsg: { en: 'Tablet styles added!', id: 'Style tablet ditambah!' }
            },
            {
                id: 67,
                chapter: 5,
                type: 'essay',
                title: { en: '67. Mobile Form', id: '67. Form Mobile' },
                desc: { en: 'Optimize form for mobile.', id: 'Optimalkan form untuk mobile.' },
                guidance: { en: ['In mobile query: .contact-form { padding: 20px; }', 'Reduce input padding.', 'Full width already set.'], id: ['Di query mobile: .contact-form { padding: 20px; }', 'Kurangi padding input.', 'Lebar penuh sudah diset.'] },
                validation: (code) => /@media.*contact-form/is.test(code),
                successMsg: { en: 'Mobile form optimized!', id: 'Form mobile dioptimalkan!' }
            },
            {
                id: 68,
                chapter: 5,
                type: 'essay',
                title: { en: '68. Hide Elements', id: '68. Sembunyikan Elemen' },
                desc: { en: 'Hide elements on mobile.', id: 'Sembunyikan elemen di mobile.' },
                guidance: { en: ['In mobile query, try: .some-element { display: none; }', 'Or visibility: hidden;', 'Hide decorative items.'], id: ['Di query mobile, coba: .some-element { display: none; }', 'Atau visibility: hidden;', 'Sembunyikan item dekoratif.'] },
                validation: (code) => /@media.*(display:\s*none|visibility:\s*hidden)/is.test(code),
                successMsg: { en: 'Elements hidden!', id: 'Elemen disembunyikan!' }
            },
            {
                id: 69,
                chapter: 5,
                type: 'essay',
                title: { en: '69. Touch Targets', id: '69. Target Sentuh' },
                desc: { en: 'Make buttons bigger on mobile.', id: 'Perbesar tombol di mobile.' },
                guidance: { en: ['In mobile: .submit-btn { padding: 15px; }', 'Increase touch area.', 'Min 44px height recommended.'], id: ['Di mobile: .submit-btn { padding: 15px; }', 'Perbesar area sentuh.', 'Min 44px tinggi disarankan.'] },
                validation: (code) => /@media.*submit-btn.*padding/is.test(code),
                successMsg: { en: 'Touch targets improved!', id: 'Target sentuh diperbaiki!' }
            },
            {
                id: 70,
                chapter: 5,
                type: 'essay',
                title: { en: '70. Mobile Hero', id: '70. Hero Mobile' },
                desc: { en: 'Adjust hero for mobile.', id: 'Sesuaikan hero untuk mobile.' },
                guidance: { en: ['Reduce hero padding: 40px 15px;', 'Reduce hero h2 font-size.', 'Keep it impactful but smaller.'], id: ['Kurangi hero padding: 40px 15px;', 'Kurangi font-size hero h2.', 'Tetap impactful tapi lebih kecil.'] },
                validation: (code) => /@media.*hero/is.test(code),
                successMsg: { en: 'Mobile hero adjusted!', id: 'Hero mobile disesuaikan!' }
            },
            {
                id: 71,
                chapter: 5,
                type: 'essay',
                title: { en: '71. Max-Width Container', id: '71. Container Max-Width' },
                desc: { en: 'Set max width for large screens.', id: 'Set max width untuk layar besar.' },
                guidance: { en: ['Add: @media (min-width: 1200px)', '.main-container { max-width: 1100px; }', 'Center on large screens.'], id: ['Tambah: @media (min-width: 1200px)', '.main-container { max-width: 1100px; }', 'Center di layar besar.'] },
                validation: (code) => /@media.*min-width.*1200/is.test(code),
                successMsg: { en: 'Large screen optimized!', id: 'Layar besar dioptimalkan!' }
            },
            {
                id: 72,
                chapter: 5,
                type: 'essay',
                title: { en: '72. Flexible Images', id: '72. Gambar Fleksibel' },
                desc: { en: 'Make images responsive.', id: 'Buat gambar responsif.' },
                guidance: { en: ['Add: img { max-width: 100%; height: auto; }', 'Images never overflow.', 'Maintain aspect ratio.'], id: ['Tambah: img { max-width: 100%; height: auto; }', 'Gambar tak akan overflow.', 'Pertahankan aspect ratio.'] },
                validation: (code) => /img.*max-width:\s*100%/is.test(code),
                successMsg: { en: 'Images flexible!', id: 'Gambar fleksibel!' }
            },
            {
                id: 73,
                chapter: 5,
                type: 'essay',
                title: { en: '73. Responsive Bento', id: '73. Bento Responsif' },
                desc: { en: 'Make bento grid responsive.', id: 'Buat bento grid responsif.' },
                guidance: { en: ['On mobile: single column, reset grid-template-areas.', 'On tablet: 2 columns.', 'Desktop: keep complex layout.'], id: ['Di mobile: satu kolom, reset grid-template-areas.', 'Di tablet: 2 kolom.', 'Desktop: pertahankan layout kompleks.'] },
                validation: (code) => /@media.*bento/is.test(code),
                successMsg: { en: 'Bento responsive!', id: 'Bento responsif!' }
            },
            {
                id: 74,
                chapter: 5,
                type: 'essay',
                title: { en: '74. Viewport Units', id: '74. Unit Viewport' },
                desc: { en: 'Use viewport units.', id: 'Pakai unit viewport.' },
                guidance: { en: ['Try: .hero { min-height: 40vh; }', 'Use vw for widths: width: 90vw;', 'Relative to viewport.'], id: ['Coba: .hero { min-height: 40vh; }', 'Pakai vw untuk lebar: width: 90vw;', 'Relatif terhadap viewport.'] },
                validation: (code) => /\d+v(h|w)/i.test(code),
                successMsg: { en: 'Viewport units used!', id: 'Unit viewport dipakai!' }
            },
            {
                id: 75,
                chapter: 5,
                type: 'essay',
                title: { en: '75. Orientation Query', id: '75. Query Orientasi' },
                desc: { en: 'Handle landscape/portrait.', id: 'Tangani landscape/portrait.' },
                guidance: { en: ['Add: @media (orientation: landscape)', 'Adjust layouts for landscape.', 'Different from portrait.'], id: ['Tambah: @media (orientation: landscape)', 'Sesuaikan layout untuk landscape.', 'Beda dari portrait.'] },
                validation: (code) => /@media.*orientation/i.test(code),
                successMsg: { en: 'Orientation handled!', id: 'Orientasi ditangani!' }
            },
            {
                id: 76,
                chapter: 5,
                type: 'essay',
                title: { en: '76. Mobile-First Approach', id: '76. Pendekatan Mobile-First' },
                desc: { en: 'Start with mobile styles.', id: 'Mulai dengan style mobile.' },
                guidance: { en: ['Base styles are mobile.', 'Use min-width queries to enhance for larger.', 'Progressive enhancement.'], id: ['Style dasar adalah mobile.', 'Pakai query min-width untuk enhance di lebih besar.', 'Progressive enhancement.'] },
                validation: (code) => /@media.*min-width/is.test(code),
                successMsg: { en: 'Mobile-first applied!', id: 'Mobile-first diterapkan!' }
            },
            {
                id: 77,
                chapter: 5,
                type: 'essay',
                title: { en: '77. Print Styles', id: '77. Style Print' },
                desc: { en: 'Add print-specific styles.', id: 'Tambah style khusus print.' },
                guidance: { en: ['Add: @media print', 'Hide navigation, show only content.', 'Optimize for printing.'], id: ['Tambah: @media print', 'Sembunyikan navigasi, tampilkan konten saja.', 'Optimalkan untuk print.'] },
                validation: (code) => /@media\s+print/i.test(code),
                successMsg: { en: 'Print styles added!', id: 'Style print ditambah!' }
            },
            {
                id: 78,
                chapter: 5,
                type: 'essay',
                title: { en: '78. Container Queries Prep', id: '78. Persiapan Container Queries' },
                desc: { en: 'Prepare for container queries.', id: 'Persiapkan untuk container queries.' },
                guidance: { en: ['Add: container-type: inline-size; to .main-container', 'Future: @container queries.', 'Modern CSS feature.'], id: ['Tambah: container-type: inline-size; ke .main-container', 'Masa depan: @container queries.', 'Fitur CSS modern.'] },
                validation: (code) => /container-type/i.test(code),
                successMsg: { en: 'Container ready!', id: 'Container siap!' }
            },
            {
                id: 79,
                chapter: 5,
                type: 'essay',
                title: { en: '79. Responsive Gaps', id: '79. Gap Responsif' },
                desc: { en: 'Adjust gaps per breakpoint.', id: 'Sesuaikan gap per breakpoint.' },
                guidance: { en: ['Mobile: smaller gaps (10px).', 'Tablet: medium gaps (15px).', 'Desktop: larger gaps (20px+).'], id: ['Mobile: gap lebih kecil (10px).', 'Tablet: gap medium (15px).', 'Desktop: gap lebih besar (20px+).'] },
                validation: (code) => /@media.*gap/is.test(code),
                successMsg: { en: 'Responsive gaps!', id: 'Gap responsif!' }
            },
            {
                id: 80,
                chapter: 5,
                type: 'essay',
                title: { en: '80. Chapter 5 Complete!', id: '80. Bab 5 Selesai!' },
                desc: { en: 'Responsive design mastered! Ready for animations.', id: 'Desain responsif dikuasai! Siap untuk animasi.' },
                guidance: { en: ['Test on different screen sizes.', 'Check all breakpoints work.', 'Ready for polish!'], id: ['Test di berbagai ukuran layar.', 'Cek semua breakpoint jalan.', 'Siap untuk polish!'] },
                validation: (code) => true,
                successMsg: { en: 'Chapter 5 Complete! ðŸ“±', id: 'Bab 5 Selesai! ðŸ“±' }
            },

            // ========================================
            // CHAPTER 6: ANIMATIONS & POLISH (81-90)
            // ========================================
            {
                id: 81,
                chapter: 6,
                type: 'choice',
                title: { en: '81. Transitions', id: '81. Transisi' },
                desc: { en: 'Add smooth transitions.', id: 'Tambahkan transisi halus.' },
                targetMarker: '.submit-btn {',
                options: [
                    { label: { en: 'A. No Transition', id: 'A. Tanpa Transisi' }, previewCode: 'background: blue;', code: '...', correct: false, msg: { en: 'Too abrupt!', id: 'Terlalu mendadak!' } },
                    { 
                        label: { en: 'B. Smooth Transition', id: 'B. Transisi Halus' }, 
                        previewCode: 'transition: all 0.3s ease;', 
                        code: '.submit-btn {\n      background-color: var(--primary-color);\n      transition: all 0.3s ease; /* <--- EDIT DURATION */\n      color: white;', 
                        cssToAdd: '',
                        correct: true, 
                        msg: { en: 'Transition added!', id: 'Transisi ditambah!' } 
                    }
                ]
            },
            {
                id: 82,
                chapter: 6,
                type: 'essay',
                title: { en: '82. Card Hover', id: '82. Hover Kartu' },
                desc: { en: 'Add hover effect to cards.', id: 'Tambah efek hover ke kartu.' },
                guidance: { en: ['Add to .card: transition: transform 0.2s;', '.card:hover { transform: translateY(-5px); }', 'Cards lift on hover.'], id: ['Tambah ke .card: transition: transform 0.2s;', '.card:hover { transform: translateY(-5px); }', 'Kartu terangkat saat hover.'] },
                validation: (code) => /\.card:hover.*transform/is.test(code),
                successMsg: { en: 'Cards animate!', id: 'Kartu beranimasi!' }
            },
            {
                id: 83,
                chapter: 6,
                type: 'essay',
                title: { en: '83. Link Underline', id: '83. Garis Bawah Link' },
                desc: { en: 'Animated underline on links.', id: 'Garis bawah animasi di link.' },
                guidance: { en: ['Add: .menu-box a { border-bottom: 2px solid transparent; }', ':hover { border-bottom-color: var(--primary-color); }', 'Add transition.'], id: ['Tambah: .menu-box a { border-bottom: 2px solid transparent; }', ':hover { border-bottom-color: var(--primary-color); }', 'Tambah transition.'] },
                validation: (code) => /menu-box\s+a:hover.*border/is.test(code),
                successMsg: { en: 'Links animate!', id: 'Link beranimasi!' }
            },
            {
                id: 84,
                chapter: 6,
                type: 'essay',
                title: { en: '84. Fade In Animation', id: '84. Animasi Fade In' },
                desc: { en: 'Create fade in keyframe.', id: 'Buat keyframe fade in.' },
                guidance: { en: ['Add: @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }', '.hero { animation: fadeIn 1s ease; }', 'Hero fades in.'], id: ['Tambah: @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }', '.hero { animation: fadeIn 1s ease; }', 'Hero fade in.'] },
                validation: (code) => /@keyframes\s+fadeIn/i.test(code),
                successMsg: { en: 'Fade in created!', id: 'Fade in dibuat!' }
            },
            {
                id: 85,
                chapter: 6,
                type: 'essay',
                title: { en: '85. Slide In Animation', id: '85. Animasi Slide In' },
                desc: { en: 'Slide elements from side.', id: 'Geser elemen dari samping.' },
                guidance: { en: ['@keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }', 'Apply to nav or cards.', 'Entrance animation.'], id: ['@keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }', 'Terapkan ke nav atau cards.', 'Animasi masuk.'] },
                validation: (code) => /@keyframes\s+slideIn/i.test(code),
                successMsg: { en: 'Slide in created!', id: 'Slide in dibuat!' }
            },
            {
                id: 86,
                chapter: 6,
                type: 'essay',
                title: { en: '86. Pulse Effect', id: '86. Efek Pulse' },
                desc: { en: 'Create pulsing animation.', id: 'Buat animasi pulse.' },
                guidance: { en: ['@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }', 'Apply to button: animation: pulse 2s infinite;', 'Attention grabbing.'], id: ['@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }', 'Terapkan ke button: animation: pulse 2s infinite;', 'Menarik perhatian.'] },
                validation: (code) => /@keyframes\s+pulse/i.test(code),
                successMsg: { en: 'Pulse effect added!', id: 'Efek pulse ditambah!' }
            },
            {
                id: 87,
                chapter: 6,
                type: 'essay',
                title: { en: '87. Loading Spinner', id: '87. Loading Spinner' },
                desc: { en: 'Create spinning loader.', id: 'Buat loader berputar.' },
                guidance: { en: ['@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }', 'Create .loader div with border.', 'animation: spin 1s linear infinite;'], id: ['@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }', 'Buat div .loader dengan border.', 'animation: spin 1s linear infinite;'] },
                validation: (code) => /@keyframes\s+spin/i.test(code),
                successMsg: { en: 'Spinner created!', id: 'Spinner dibuat!' }
            },
            {
                id: 88,
                chapter: 6,
                type: 'essay',
                title: { en: '88. Bounce Animation', id: '88. Animasi Bounce' },
                desc: { en: 'Create bouncing effect.', id: 'Buat efek bounce.' },
                guidance: { en: ['@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }', 'Add cubic-bezier for realistic bounce.', 'Apply to elements.'], id: ['@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }', 'Tambah cubic-bezier untuk bounce realistis.', 'Terapkan ke elemen.'] },
                validation: (code) => /@keyframes\s+bounce/i.test(code),
                successMsg: { en: 'Bounce created!', id: 'Bounce dibuat!' }
            },
            {
                id: 89,
                chapter: 6,
                type: 'essay',
                title: { en: '89. Stagger Animations', id: '89. Animasi Bertahap' },
                desc: { en: 'Animate cards with delay.', id: 'Animasi kartu dengan delay.' },
                guidance: { en: ['.card:nth-child(1) { animation-delay: 0s; }', ':nth-child(2) { animation-delay: 0.1s; }', 'Staggered entrance.'], id: ['.card:nth-child(1) { animation-delay: 0s; }', ':nth-child(2) { animation-delay: 0.1s; }', 'Masuk bertahap.'] },
                validation: (code) => /animation-delay|nth-child/i.test(code),
                successMsg: { en: 'Stagger effect!', id: 'Efek bertahap!' }
            },
            {
                id: 90,
                chapter: 6,
                type: 'playground',
                title: { en: '90. FINAL PLAYGROUND', id: '90. PLAYGROUND AKHIR' },
                desc: { en: 'You mastered HTML/CSS! Create anything you want.', id: 'Kamu menguasai HTML/CSS! Buat apapun yang kamu mau.' },
                guidance: { 
                    en: [
                        'ðŸŽ‰ Congratulations! You completed all 90 levels!',
                        'âœ¨ You learned: Structure, Forms, Theming, Grid, Responsive, Animations',
                        'ðŸš€ Export your masterpiece and keep building!',
                        'ðŸ’¡ Next: Learn JavaScript to make it interactive!'
                    ], 
                    id: [
                        'ðŸŽ‰ Selamat! Kamu menyelesaikan 90 level!',
                        'âœ¨ Kamu belajar: Struktur, Form, Theming, Grid, Responsif, Animasi',
                        'ðŸš€ Export karya mastermu dan terus berkarya!',
                        'ðŸ’¡ Selanjutnya: Belajar JavaScript untuk interaktivitas!'
                    ] 
                }
            }
        ];

        // --- INITIAL TEMPLATE ---
        const BASE_TEMPLATE = `<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: sans-serif; padding: 0; margin: 0; background-color: #ffffff; color: #333; }
    
    /* === AREA CSS KAMU ADA DI BAWAH === */
  </style>
</head>
<body>

  <!-- STEP_1_CONTAINER -->

</body>
</html>`;

        function App() {
            const [lang, setLang] = useState(() => localStorage.getItem('np_mod_lang') || 'id');
            const [levelIdx, setLevelIdx] = useState(0);
            const [code, setCode] = useState(BASE_TEMPLATE);
            const [feedback, setFeedback] = useState(null);
            
            const level = LEVELS[levelIdx];

            useEffect(() => {
                localStorage.setItem('np_mod_lang', lang);
            }, [lang]);

            const iframeRef = useRef(null);
            useEffect(() => {
                if (iframeRef.current) iframeRef.current.srcdoc = code;
            }, [code]);

            const handleChoice = (opt) => {
                if (!opt.correct) {
                    setFeedback({ type: 'error', msg: opt.msg[lang] });
                    return;
                }
                let newCode = code.replace(level.targetMarker, opt.code);
                if (opt.cssToAdd) {
                    const styleEnd = newCode.indexOf('</style>');
                    if (styleEnd !== -1) {
                        newCode = newCode.slice(0, styleEnd) + opt.cssToAdd + newCode.slice(styleEnd);
                    }
                }
                setCode(newCode);
                setFeedback({ type: 'success', msg: opt.msg[lang] });
            };

            const handleEssayCheck = () => {
                if (level.validation && !level.validation(code)) {
                    setFeedback({ type: 'error', msg: lang === 'id' ? 'Coba ubah nilainya (jangan nilai default).' : 'Try changing default values.' });
                } else {
                    setFeedback({ type: 'success', msg: level.successMsg ? level.successMsg[lang] : 'Saved!' });
                }
            };

            const nextLevel = () => {
                setFeedback(null);
                if (levelIdx < LEVELS.length - 1) setLevelIdx(prev => prev + 1);
            };

            const exportHTML = () => {
                const blob = new Blob([code], {type: 'text/html'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'modern-website.html';
                a.click();
            };

            // Get current chapter
            const currentChapter = level.chapter || 1;
            const chapterLevels = LEVELS.filter(l => l.chapter === currentChapter);
            const chapterProgress = chapterLevels.findIndex(l => l.id === level.id) + 1;

            return (
                <div className="flex flex-col h-full font-mono text-sm">
                    {/* HEADER */}
                    <header className="bg-neutral-800 border-b border-neutral-700 p-3 flex justify-between items-center text-white shrink-0">
                        <div className="flex items-center gap-2">
                            <TerminalIcon className="text-green-500" />
                            <span className="font-bold tracking-wider text-green-500 hidden sm:inline">NP_MODERNIZER.EXE - By Angga Conni Saputra</span>
                            <span className="font-bold tracking-wider text-green-500 sm:hidden">NP_MOD</span>
                        </div>
                        <div className="flex gap-3 items-center">
                            <div className="text-xs bg-neutral-700 px-2 py-1 rounded text-neutral-300">
                                Ch{currentChapter} â€¢ {chapterProgress}/{chapterLevels.length} â€¢ {levelIdx + 1}/90
                            </div>
                            <button onClick={() => setLang(l => l === 'en' ? 'id' : 'en')} className="flex items-center gap-1 bg-neutral-700 hover:bg-neutral-600 px-2 py-1 rounded text-xs transition border border-neutral-600">
                                <GlobeIcon /> {lang.toUpperCase()}
                            </button>
                            <button onClick={exportHTML} className="bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-xs font-bold flex items-center gap-1 transition shadow-lg shadow-blue-900/20">
                                <SaveIcon /> <span className="hidden sm:inline">EXPORT</span>
                            </button>
                        </div>
                    </header>

                    <div className="flex-1 flex flex-col md:flex-row overflow-hidden">
                        {/* LEFT: INTERACTIVE TERMINAL */}
                        <div className="w-full md:w-1/2 flex flex-col border-r border-neutral-700 bg-black h-1/2 md:h-full">
                            <div className="p-4 bg-neutral-900 border-b border-neutral-700 shadow-md z-10">
                                <h2 className="text-yellow-400 font-bold mb-1 text-base flex items-center gap-2">
                                    <span className="text-green-500">&gt;</span> {level.title[lang]}
                                </h2>
                                <p className="text-neutral-300 text-sm mb-2 leading-relaxed">{level.desc[lang]}</p>
                                
                                {(level.type === 'essay' || level.type === 'playground') && (
                                    <div className="mt-2 bg-neutral-800 p-3 rounded border border-neutral-600 relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-1 h-full bg-green-500"></div>
                                        <div className="text-[10px] text-green-400 uppercase font-bold mb-1 tracking-wider flex items-center gap-2">
                                            <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                                            {lang === 'id' ? 'MISI EDIT (CARI DI KODE):' : 'EDIT MISSION (FIND IN CODE):'}
                                        </div>
                                        <ul className="list-disc list-inside text-xs text-neutral-300 space-y-1 ml-1">
                                            {level.guidance[lang].map((g, i) => <li key={i}>{g}</li>)}
                                        </ul>
                                    </div>
                                )}
                            </div>

                            <div className="flex-1 relative group">
                                <textarea 
                                    className="w-full h-full bg-black text-green-500 p-4 resize-none focus:outline-none leading-relaxed selection:bg-green-900 selection:text-white font-mono text-sm"
                                    spellCheck="false"
                                    value={code}
                                    onChange={(e) => {
                                        setCode(e.target.value);
                                        if(feedback?.type === 'error') setFeedback(null);
                                    }}
                                />
                            </div>

                            <div className="p-4 bg-neutral-900 border-t border-neutral-700 min-h-[120px] flex flex-col justify-center shrink-0">
                                {level.type === 'choice' && !feedback && (
                                    <div className="space-y-2 overflow-y-auto max-h-[160px] pr-1">
                                        {level.options.map((opt, i) => (
                                            <button key={i} onClick={() => handleChoice(opt)} 
                                                className="w-full text-left px-3 py-2 bg-neutral-800 border border-neutral-600 hover:border-green-500 hover:bg-neutral-700 rounded transition group flex items-start gap-3">
                                                <div className="text-green-400 font-bold text-lg pt-0.5">{String.fromCharCode(65 + i)}.</div>
                                                <div className="flex-1">
                                                    <div className="text-neutral-200 font-bold text-sm mb-1">{opt.label[lang].substring(3)}</div>
                                                    {opt.previewCode && (
                                                        <div className="text-[10px] font-mono text-green-300/80 bg-black/40 p-1.5 rounded border border-white/5 truncate">
                                                            {opt.previewCode}
                                                        </div>
                                                    )}
                                                </div>
                                            </button>
                                        ))}
                                    </div>
                                )}

                                {(level.type === 'essay' || level.type === 'playground') && !feedback && (
                                    <button onClick={handleEssayCheck} className="w-full py-3 bg-green-700 hover:bg-green-600 text-white font-bold rounded flex justify-center items-center gap-2 transition hover:shadow-lg hover:shadow-green-900/20">
                                        <PlayIcon /> {lang === 'id' ? 'SIMPAN PERUBAHAN' : 'SAVE CHANGES'}
                                    </button>
                                )}

                                {feedback && (
                                    <div className={`p-3 rounded border flex items-center gap-3 animate-in fade-in slide-in-from-bottom-2 ${feedback.type === 'success' ? 'bg-green-900/30 border-green-600' : 'bg-red-900/30 border-red-600'}`}>
                                        {feedback.type === 'success' ? <CheckCircleIcon className="text-green-400 shrink-0" /> : <TerminalIcon className="text-red-400 shrink-0" />}
                                        <div className="flex-1 text-sm">
                                            <div className={`font-bold ${feedback.type === 'success' ? 'text-green-400' : 'text-red-400'}`}>
                                                {feedback.type === 'success' ? (lang === 'id' ? 'SUKSES' : 'SUCCESS') : 'ERROR'}
                                            </div>
                                            <div className="text-neutral-300 text-xs mt-0.5">{feedback.msg}</div>
                                        </div>
                                        {feedback.type === 'success' && levelIdx < LEVELS.length - 1 && (
                                            <button onClick={nextLevel} className="bg-green-600 hover:bg-green-500 text-white px-4 py-1.5 rounded text-xs font-bold animate-pulse whitespace-nowrap">
                                                NEXT &gt;&gt;
                                            </button>
                                        )}
                                        {feedback.type === 'error' && (
                                            <button onClick={() => setFeedback(null)} className="text-neutral-400 hover:text-white underline text-xs whitespace-nowrap">Reset</button>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* RIGHT: LIVE PREVIEW */}
                        <div className="w-full md:w-1/2 bg-white flex flex-col h-1/2 md:h-full border-t md:border-t-0 md:border-l border-neutral-700">
                            <div className="h-8 bg-neutral-200 border-b border-neutral-300 flex items-center px-2 gap-2 shrink-0">
                                <div className="flex gap-1.5">
                                    <div className="w-3 h-3 rounded-full bg-red-400"></div>
                                    <div className="w-3 h-3 rounded-full bg-yellow-400"></div>
                                    <div className="w-3 h-3 rounded-full bg-green-400"></div>
                                </div>
                                <div className="text-[10px] text-neutral-500 font-sans truncate px-2 bg-white/50 rounded flex-1">localhost:3000/my-site</div>
                            </div>
                            <div className="flex-1 bg-checkered relative">
                                <iframe ref={iframeRef} title="preview" className="w-full h-full border-none" sandbox="allow-scripts" />
                                <div className="absolute bottom-2 right-2 bg-black/10 text-black/40 px-2 py-1 text-[10px] font-bold rounded pointer-events-none">LIVE PREVIEW</div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
